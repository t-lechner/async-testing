var r=class{constructor(e){this.node=e;this.errorMessage="Require done callback inside subscribe block."}get subscribeNode(){if(this.node.callee.type==="MemberExpression")return this.node.callee.property}rangeEquals(e){return this.node.range===e.range}static isSubscribeExpression(e){return e.callee.type==="MemberExpression"&&e.callee.property.type==="Identifier"&&e.callee.property.name==="subscribe"}},o={meta:{type:"problem",docs:{description:"This rule should be used to secure flaky async test implementations. - It is required to do a done callback when subscribing inside a async test.",category:"async tests",url:"https://medium.com/angular-in-depth/how-to-test-observables-a00038c7faad"}},create:n=>{let e;return{CallExpression:s=>{r.isSubscribeExpression(s)&&(e=new r(s))},'CallExpression > Identifier[name="done"]':s=>{e&&(e.hasDoneCallback=!0)},"CallExpression:exit":function(s){e&&e.rangeEquals(s)&&!e.hasDoneCallback&&(n.report({node:e.subscribeNode,message:e.errorMessage}),e=void 0)}}}};module.exports={rules:{"require-done-in-subscribe":o}};
